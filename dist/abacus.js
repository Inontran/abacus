/*! For license information please see abacus.js.LICENSE.txt */
(()=>{var e={1843:e=>{var t={};try{t.EventTarget=(new EventTarget).constructor}catch(e){!function(e,s){var a=e.create,i=e.defineProperty,n=r.prototype;function r(){"use strict";s.set(this,a(null))}function l(e,t,s){i(e,t,{configurable:!0,writable:!0,value:s})}function o(e){var t=e.options;t&&t.once&&e.target.removeEventListener(this.type,e.listener),"function"==typeof e.listener?e.listener.call(e.target,this):e.listener.handleEvent(this)}l(n,"addEventListener",(function(e,t,a){for(var i=s.get(this),n=i[e]||(i[e]=[]),r=0,l=n.length;r<l;r++)if(n[r].listener===t)return;n.push({target:this,listener:t,options:a})})),l(n,"dispatchEvent",(function(e){var t=s.get(this)[e.type];return t&&(l(e,"target",this),l(e,"currentTarget",this),t.slice(0).forEach(o,e),delete e.currentTarget,delete e.target),!0})),l(n,"removeEventListener",(function(e,t){for(var a=s.get(this),i=a[e]||(a[e]=[]),n=0,r=i.length;n<r;n++)if(i[n].listener===t)return void i.splice(n,1)})),t.EventTarget=r}(Object,new WeakMap)}e.exports=t.EventTarget},5160:()=>{},1162:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Handle=void 0;var s=function(){function e(e,t){this._posLeft=null,this._posBottom=null,this._handleIndex=0,this._htmlElement=document.createElement("span"),this._className=(null==e?void 0:e.handle)?e.handle:"abacus__handle",this._htmlElement.classList.add(this._className),void 0===t||isNaN(t)||(this._handleIndex=t)}return Object.defineProperty(e.prototype,"posLeft",{get:function(){return this._posLeft},set:function(e){null===e?(this._posLeft=e,this._htmlElement.style.left=""):(e<0&&(e=0),e>100&&(e=100),this._posLeft=e,this._htmlElement.style.left=e.toString()+"%")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"posBottom",{get:function(){return this._posBottom},set:function(e){null===e?(this._posBottom=e,this._htmlElement.style.bottom=""):(e<0&&(e=0),e>100&&(e=100),this._posBottom=e,this._htmlElement.style.bottom=e.toString()+"%")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"htmlElement",{get:function(){return this._htmlElement},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"handleIndex",{get:function(){return this._handleIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},set:function(e){this._htmlElement.classList.remove(this._className),this._htmlElement.classList.add(e),this._className=e},enumerable:!1,configurable:!0}),e}();t.Handle=s},6565:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Mark=void 0;var s=function(){function e(e){this._isInrange=!1,this._classNameSelected="",this._isSelected=!1,this._posLeft=null,this._posBottom=null,this._htmlElement=document.createElement("span"),this._className=(null==e?void 0:e.mark)?e.mark:"abacus__mark",this._classNameInrange=(null==e?void 0:e.markInrange)?e.markInrange:"abacus__mark_inrange",this._classNameSelected=(null==e?void 0:e.markSelected)?e.markSelected:"abacus__mark_selected",this._htmlElement.classList.add(this._className)}return Object.defineProperty(e.prototype,"htmlElement",{get:function(){return this._htmlElement},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},set:function(e){this._className&&this._htmlElement.classList.remove(this._className),e&&this._htmlElement.classList.add(e),this._className=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"classNameInrange",{get:function(){return this._classNameInrange},set:function(e){e&&"string"==typeof e&&(this._htmlElement.classList.contains(this._classNameInrange)&&this._htmlElement.classList.add(e),this._classNameInrange&&this._htmlElement.classList.remove(this._classNameInrange),this._classNameInrange=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"classNameSelected",{get:function(){return this._classNameSelected},set:function(e){e&&"string"==typeof e&&(this._htmlElement.classList.contains(this._classNameSelected)&&this._htmlElement.classList.add(e),this._classNameSelected&&this._htmlElement.classList.remove(this._classNameSelected),this._classNameSelected=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"posLeft",{get:function(){return this._posLeft},set:function(e){null===e?(this._posLeft=e,this._htmlElement.style.left=""):(e<0&&(e=0),e>100&&(e=100),this._posLeft=e,this._htmlElement.style.left=e.toString()+"%")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"posBottom",{get:function(){return this._posBottom},set:function(e){null===e?(this._posBottom=e,this._htmlElement.style.bottom=""):(e<0&&(e=0),e>100&&(e=100),this._posBottom=e,this._htmlElement.style.bottom=e.toString()+"%")},enumerable:!1,configurable:!0}),e.prototype.isInrange=function(e){return void 0!==e&&this._classNameInrange&&(this._isInrange=!!e,this._isInrange?this._htmlElement.classList.add(this._classNameInrange):this._htmlElement.classList.remove(this._classNameInrange)),this._isInrange},e.prototype.isSelected=function(e){return void 0!==e&&this._classNameSelected&&(this._isSelected=!!e,this._isSelected?this._htmlElement.classList.add(this._classNameSelected):this._htmlElement.classList.remove(this._classNameSelected)),this._isSelected},e}();t.Mark=s},9482:function(e,t,s){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Model=void 0;var i=a(s(1843)),n=function(){function e(e){this._abacusProperty={animate:!1,classes:{abacus:"abacus",vertical:"abacus_vertical",disabled:"abacus_disabled",handle:"abacus__handle",range:"abacus__range",mark:"abacus__mark",markSelected:"abacus__mark_selected",markInrange:"abacus__mark_inrange",tooltip:"abacus__tooltip",tooltipVisible:"abacus__tooltip_visible"},disabled:!1,max:100,min:0,orientation:"horizontal",range:!1,scale:!1,step:1,tooltip:!1,value:0,values:[0]},e&&(this.abacusProperty=e),this._eventTarget=new i.default,this._eventUpdateModel=new CustomEvent("update-model")}return Object.defineProperty(e.prototype,"abacusProperty",{get:function(){return this._abacusProperty},set:function(e){var t,s,a,i,n;if(void 0!==e.animate){var r="fast"===e.animate||"slow"===e.animate,l="boolean"==typeof e.animate;r||l?this._abacusProperty.animate=e.animate:null==e.animate?this._abacusProperty.animate=!1:isNaN(e.animate)||(this._abacusProperty.animate=parseInt(e.animate))}if("object"==typeof e.classes&&(this._abacusProperty.classes||(this._abacusProperty.classes={}),"string"==typeof e.classes.abacus&&e.classes.abacus&&(this._abacusProperty.classes.abacus=e.classes.abacus),"string"==typeof e.classes.disabled&&e.classes.disabled&&(this._abacusProperty.classes.disabled=e.classes.disabled),"string"==typeof e.classes.range&&e.classes.range&&(this._abacusProperty.classes.range=e.classes.range),"string"==typeof e.classes.handle&&e.classes.handle&&(this._abacusProperty.classes.handle=e.classes.handle),"string"==typeof e.classes.mark&&e.classes.mark&&(this._abacusProperty.classes.mark=e.classes.mark),"string"==typeof e.classes.markSelected&&e.classes.markSelected&&(this._abacusProperty.classes.markSelected=e.classes.markSelected),"string"==typeof e.classes.markInrange&&e.classes.markInrange&&(this._abacusProperty.classes.markInrange=e.classes.markInrange),"string"==typeof e.classes.tooltip&&e.classes.tooltip&&(this._abacusProperty.classes.tooltip=e.classes.tooltip),"string"==typeof e.classes.tooltipVisible&&e.classes.tooltipVisible&&(this._abacusProperty.classes.tooltipVisible=e.classes.tooltipVisible)),void 0!==e.disabled&&(this._abacusProperty.disabled=!!e.disabled),void 0!==e.max&&null!==e.max&&(isNaN(e.max)||("string"==typeof e.max?this._abacusProperty.max=parseFloat(e.max):this._abacusProperty.max=e.max)),void 0!==e.scale&&(this._abacusProperty.scale=!!e.scale),void 0!==e.min&&null!==e.min&&(isNaN(e.min)||("string"==typeof e.min?this._abacusProperty.min=parseFloat(e.min):this._abacusProperty.min=e.min)),this._abacusProperty.max<this._abacusProperty.min){var o=this._abacusProperty.max;this._abacusProperty.max=this._abacusProperty.min,this._abacusProperty.min=o}if(void 0!==e.step&&null!==e.step&&(isNaN(e.step)||("string"==typeof e.step?this._abacusProperty.step=parseFloat(e.step):this._abacusProperty.step=e.step)),void 0!==e.tooltip&&(this._abacusProperty.tooltip=!!e.tooltip),void 0!==e.range&&(!1===e.range||!0===e.range?this._abacusProperty.range=e.range:"max"===e.range?this._abacusProperty.range="max":"min"===e.range&&(this._abacusProperty.range="min")),void 0!==e.value&&null!==e.value&&(isNaN(e.value)||("string"==typeof e.value&&(e.value=parseFloat(e.value)),e.value=this.roundValuePerStep(e.value),this._abacusProperty.value=e.value,(null===(t=this._abacusProperty.values)||void 0===t?void 0:t.length)||(this._abacusProperty.values=[]),this._abacusProperty.values[0]=e.value)),null===(s=e.values)||void 0===s?void 0:s.length){this._abacusProperty.values=[];for(var c=0;c<e.values.length&&("string"==typeof e.values[c]&&(e.values[c]=parseFloat(e.values[c].toString())),e.values[c]=this.roundValuePerStep(e.values[c]),this._abacusProperty.values[c]=e.values[c],0===c&&(this._abacusProperty.value=e.values[c]),!(c>1));c++);this._abacusProperty.values.sort((function(e,t){return e>t?1:e===t?0:-1}))}!0===this._abacusProperty.range?(null===(a=this._abacusProperty.values)||void 0===a?void 0:a.length)?1===(null===(i=this._abacusProperty.values)||void 0===i?void 0:i.length)&&(this._abacusProperty.values[1]=this._abacusProperty.max?this._abacusProperty.max:100):(this._abacusProperty.values=[],this._abacusProperty.values[0]=this._abacusProperty.min?this._abacusProperty.min:0,this._abacusProperty.values[1]=this._abacusProperty.max?this._abacusProperty.max:100):this._abacusProperty.values=null===(n=this._abacusProperty.values)||void 0===n?void 0:n.slice(0,1),void 0!==e.orientation&&("vertical"===e.orientation?this._abacusProperty.orientation="vertical":this._abacusProperty.orientation="horizontal"),void 0!==e.change&&(this._abacusProperty.change=e.change),void 0!==e.create&&(this._abacusProperty.create=e.create),void 0!==e.slide&&(this._abacusProperty.slide=e.slide),void 0!==e.start&&(this._abacusProperty.start=e.start),void 0!==e.stop&&(this._abacusProperty.stop=e.stop),this._eventTarget&&this._eventTarget.dispatchEvent(this._eventUpdateModel)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{set:function(e){var t;e=this.roundValuePerStep(e),this._abacusProperty.value=e,(null===(t=this._abacusProperty.values)||void 0===t?void 0:t.length)||(this._abacusProperty.values=[]),this._abacusProperty.values[0]=e,this._eventTarget&&this._eventTarget.dispatchEvent(this._eventUpdateModel)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"eventTarget",{get:function(){return this._eventTarget},enumerable:!1,configurable:!0}),e.prototype.roundValuePerStep=function(t){var s=t,a=this._abacusProperty.min,i=this._abacusProperty.max,n=this._abacusProperty.step;if(t>=i)return i;if(t<=a)return a;for(var r=a;r<i;r+=n)if(t>r&&t<r+n){if(r+n>i){s=i;break}var l=r<0?-1*r:r,o=r+n,c=o<0?-1*o:o,h=t<0?-1*t:t,u=void 0,d=void 0;t<0?(u=l-h,d=h-c):(u=h-l,d=c-h),s=u<d?r:o;break}return e.round(s,n)},e.countNumAfterPoint=function(e){var t=e.toString();return~(t+"").indexOf(".")?(t+"").split(".")[1].length:0},e.round=function(t,s){var a=e.countNumAfterPoint(s);return a>0?parseFloat(t.toFixed(a)):Math.round(t)},e}();t.Model=n},8709:function(e,t,s){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Presenter=void 0;var i=a(s(1843)),n=s(9482),r=function(){function e(e){this._model=new n.Model(e),this._eventTarget=new i.default,this._eventUpdateModel=new CustomEvent("update-model"),this._bindEventListeners()}return e.prototype.getModelAbacusProperty=function(){return this._model.abacusProperty},e.prototype.setModelAbacusProperty=function(e){this._model.abacusProperty=e},e.prototype.setAbacusValue=function(e){this._model.abacusProperty={values:[e[0],e[1]]}},e.prototype._bindEventListeners=function(){this._model.eventTarget.addEventListener("update-model",this._updateModelHandler.bind(this))},e.prototype._updateModelHandler=function(){this._eventTarget.dispatchEvent(this._eventUpdateModel)},Object.defineProperty(e.prototype,"eventTarget",{get:function(){return this._eventTarget},enumerable:!1,configurable:!0}),e}();t.Presenter=r},9634:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Range=void 0;var s,a=function(){function e(e){this._width=100,this._height=100,this._rangeType=s.HIDDEN,this._htmlElement=document.createElement("span"),this._className=(null==e?void 0:e.range)?e.range:"abacus__range",this._htmlElement.classList.add(this._className)}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(e){null===e?(this._width=e,this._htmlElement.style.width=""):(e<0&&(e=0),e>100&&(e=100),this._width=e,this._htmlElement.style.width=e.toString()+"%")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(e){null===e?(this._height=e,this._htmlElement.style.height=""):(e<0&&(e=0),e>100&&(e=100),this._height=e,this._htmlElement.style.height=e.toString()+"%")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"htmlElement",{get:function(){return this._htmlElement},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},set:function(e){this._htmlElement.classList.remove(this._className),this._htmlElement.classList.add(e),this._className=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rangeType",{get:function(){return this._rangeType},set:function(e){"hidden"!==e&&"min"!==e&&"max"!==e&&"between"!==e&&(e="hidden"),this._rangeType=e},enumerable:!1,configurable:!0}),e}();t.Range=a,function(e){e.HIDDEN="hidden",e.MIN="min",e.MAX="max",e.BETWEEN="between"}(s||(s={}))},7768:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tooltip=void 0;var s=function(){function e(e,t){this._tooltipIndex=0,this._isVisible=!1,this._posLeft=null,this._posBottom=null,this._htmlElement=document.createElement("span"),this._className=(null==e?void 0:e.tooltip)?e.tooltip:"abacus__tooltip",this._classNameVisible=(null==e?void 0:e.tooltipVisible)?e.tooltipVisible:"abacus__tooltip_visible",this._htmlElement.classList.add(this._className),void 0===t||isNaN(t)||(this._tooltipIndex=t)}return Object.defineProperty(e.prototype,"htmlElement",{get:function(){return this._htmlElement},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},set:function(e){this._className&&this._htmlElement.classList.remove(this._className),e&&this._htmlElement.classList.add(e),this._className=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"classNameVisible",{get:function(){return this._classNameVisible},set:function(e){e&&"string"==typeof e&&(this._htmlElement.classList.contains(this._classNameVisible)&&this._htmlElement.classList.add(e),this._classNameVisible&&this._htmlElement.classList.remove(this._classNameVisible),this._classNameVisible=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"posLeft",{get:function(){return this._posLeft},set:function(e){null===e?(this._posLeft=e,this._htmlElement.style.left=""):(e<0&&(e=0),e>100&&(e=100),this._posLeft=e,this._htmlElement.style.left=e.toString()+"%")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"posBottom",{get:function(){return this._posBottom},set:function(e){null===e?(this._posBottom=e,this._htmlElement.style.bottom=""):(e<0&&(e=0),e>100&&(e=100),this._posBottom=e,this._htmlElement.style.bottom=e.toString()+"%")},enumerable:!1,configurable:!0}),e.prototype.isVisible=function(e){return void 0!==e&&this._classNameVisible&&(this._isVisible=!!e,this._isVisible?this._htmlElement.classList.add(this._classNameVisible):this._htmlElement.classList.remove(this._classNameVisible)),this._isVisible},e}();t.Tooltip=s},6958:function(e,t,s){"use strict";var a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,s=t&&e[t],a=0;if(s)return s.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.View=void 0;var i=s(8709),n=s(5064),r=s(1162),l=s(9634),o=s(6565),c=s(7768),h=function(){function e(e,t){this._handles=[],this._tooltips=[],this._isDisabled=!1,this._isDragHandle=!1,this._handleMovingTimer=null,this._mapScale=new Map,this._cachedAbacusProperty={},this._isVertical=!1,this._presenter=new i.Presenter(t);var s=this._presenter.getModelAbacusProperty();this._widgetContainer=new n.WidgetContainer(e,s.classes),this._widgetContainer.htmlElement.innerHTML="",this._range=new l.Range(s.classes),this._tooltips[0]=new c.Tooltip(s.classes,0),this._customEventChange=new CustomEvent("abacus-change",{bubbles:!0,cancelable:!0}),this._customEventCreate=new CustomEvent("abacus-create",{bubbles:!0,cancelable:!0}),this._customEventSlide=new CustomEvent("abacus-slide",{bubbles:!0,cancelable:!0}),this._customEventStart=new CustomEvent("abacus-start",{bubbles:!0,cancelable:!0}),this._customEventStop=new CustomEvent("abacus-stop",{bubbles:!0,cancelable:!0}),this.updateView(),this._bindEventListeners(),this._eventCreateWrapper()}return e.prototype.getPosPercent=function(e){var t=0;return(t=this._isVertical?100-(t=(e-this._widgetContainer.htmlElement.getBoundingClientRect().top)/this._widgetContainer.htmlElement.getBoundingClientRect().height*100):(e-this._widgetContainer.htmlElement.getBoundingClientRect().left)/this._widgetContainer.htmlElement.getBoundingClientRect().width*100)<0&&(t=0),t>100&&(t=100),t},e.prototype.getPosPerStep=function(e){var t=0,s=this._presenter.getModelAbacusProperty(),a=s.min,i=s.max,n=s.step/(i-a)*100;return t=e/n,(t=Math.round(t))*n},e.prototype.getPosFromValue=function(e){var t,s=this._presenter.getModelAbacusProperty(),a=s.min,i=s.max;return a<0&&(i+=-1*a,e+=-1*a),(t=e/i*100)<0?0:t>100?100:t},e.prototype.getValFromPosPercent=function(e){var t=this._presenter.getModelAbacusProperty(),s=t.min,a=t.max;return s<0&&(a+=-1*s),a*e/100- -1*s},e.prototype.option=function(e,t){if("string"==typeof e)switch(e){case"animate":case"classes":case"disabled":case"max":case"scale":case"min":case"orientation":case"range":case"step":case"tooltip":case"value":case"values":if(void 0===t)return this._presenter.getModelAbacusProperty()[e];var s={};s[e]=t,this._presenter.setModelAbacusProperty(s)}else{if("object"!=typeof t)return this._presenter.getModelAbacusProperty();this._presenter.setModelAbacusProperty(t)}},e.prototype.updateView=function(){var t,s,a,i,n,r,l,o,c,h,u=this._presenter.getModelAbacusProperty(),d=(null===(t=this._cachedAbacusProperty)||void 0===t?void 0:t.range)!==u.range,m=(null===(s=this._cachedAbacusProperty)||void 0===s?void 0:s.orientation)!==u.orientation,_=(null===(a=this._cachedAbacusProperty)||void 0===a?void 0:a.tooltip)!==u.tooltip,p=(null===(i=this._cachedAbacusProperty)||void 0===i?void 0:i.animate)!==u.animate,v=(null===(n=this._cachedAbacusProperty)||void 0===n?void 0:n.max)!==u.max,f=(null===(r=this._cachedAbacusProperty)||void 0===r?void 0:r.min)!==u.min,b=!e.arrayCompare(null===(l=this._cachedAbacusProperty)||void 0===l?void 0:l.values,u.values),g=(null===(o=this._cachedAbacusProperty)||void 0===o?void 0:o.disabled)!==u.disabled,y=(null===(c=this._cachedAbacusProperty)||void 0===c?void 0:c.scale)!==u.scale,E=(null===(h=this._cachedAbacusProperty)||void 0===h?void 0:h.step)!==u.step;d&&(this._createViewHandles(u),this._createViewRange(u)),m&&("vertical"===u.orientation?(this._isVertical=!0,this._widgetContainer.isVertical(!0)):(this._isVertical=!1,this._widgetContainer.isVertical(!1))),(_||d)&&(this._createViewTooltips(u),this._updateViewTooltips(u),this._setTransition()),p&&this._setTransition(),(d||v||f||m||b)&&(this._updateViewHandles(u),this._updateViewTooltips(u),this._updateViewRange(u),this._highlightMarks()),b&&(this._findMovedHandle(),this._eventChangeWrapper()),u.classes&&this._updateClassNames(u.classes),g&&this.toggleDisable(u.disabled),(y||E||v||f||m)&&(u.scale?(this._createScale(),this._setTransition()):this._removeScale(),this._highlightMarks()),this._cachedAbacusProperty=this._getCloneAbacusProperty(u)},e.prototype._createViewHandles=function(e){var t,s=this,a=[];switch((null===(t=s._handles)||void 0===t?void 0:t.length)||(s._handles=[],s._handles[0]=new r.Handle(e.classes,0),s._widgetContainer.htmlElement.append(s._handles[0].htmlElement),this._currentHandle=this._handles[0],a.push(0)),e.range){case!0:s._handles[1]=new r.Handle(e.classes,1),s._widgetContainer.htmlElement.append(s._handles[1].htmlElement),a.push(1);break;case"max":case"min":default:s._handles[1]&&(s._handles[1].htmlElement.remove(),s._handles=s._handles.slice(0,1)),s._currentHandle=s._handles[0]}for(var i=function(e){var t=a[e];s._handles[t].htmlElement.addEventListener("mousedown",(function(e){e.preventDefault(),s._isDisabled||(s._isDragHandle=!0,s._currentHandle=s._handles[t],s._eventStartWrapper(e))})),s._handles[t].htmlElement.addEventListener("touchstart",(function(e){e.preventDefault(),s._isDisabled||(s._isDragHandle=!0,s._currentHandle=s._handles[t],s._eventStartWrapper(e))}),{passive:!0})},n=0;n<a.length;n++)i(n)},e.prototype._updateViewHandles=function(e){if(e.values)for(var t=0;t<e.values.length;t++){var s=e.values[t],a=this.getPosFromValue(s);this._handles[t]&&(this._isVertical?(this._handles[t].posLeft=null,this._handles[t].posBottom=a):(this._handles[t].posBottom=null,this._handles[t].posLeft=a))}},e.prototype._createViewTooltips=function(e){for(var t=0;t<this._tooltips.length;t++)this._tooltips[t].htmlElement.remove();if(this._tooltips=[],e.tooltip){var s=!0===e.range?2:1;for(t=0;t<s;t++)this._tooltips[t]=new c.Tooltip(e.classes,t),this._widgetContainer.htmlElement.append(this._tooltips[t].htmlElement),this._tooltips[t].isVisible(!0)}},e.prototype._updateViewTooltips=function(e){if(e.values&&e.tooltip)for(var t=0;t<e.values.length;t++){var s=e.values[t],a=this.getPosFromValue(s);this._tooltips[t]&&(this._isVertical?(this._tooltips[t].posLeft=null,this._tooltips[t].posBottom=a):(this._tooltips[t].posBottom=null,this._tooltips[t].posLeft=a),this._tooltips[t].htmlElement.innerText=e.values[t].toString())}},e.prototype._createViewRange=function(e){switch(e.range){case"max":this._range.rangeType="max",this._widgetContainer.htmlElement.prepend(this._range.htmlElement);break;case!0:this._range.rangeType="between",this._widgetContainer.htmlElement.prepend(this._range.htmlElement);break;case"min":this._range.rangeType="min",this._widgetContainer.htmlElement.prepend(this._range.htmlElement);break;default:this._range.rangeType="hidden",this._range.htmlElement.remove()}},e.prototype._updateViewRange=function(e){var t;if(null===(t=e.values)||void 0===t?void 0:t.length){var s=this.getPosFromValue(e.values[0]),a=this.getPosFromValue(e.values[1]);if(this._isVertical)switch(this._range.htmlElement.style.left="",this._range.htmlElement.style.right="",this._range.width=null,this._range.rangeType){case"min":this._range.htmlElement.style.top="auto",this._range.htmlElement.style.bottom="0",this._range.height=s;break;case"max":this._range.htmlElement.style.top="0",this._range.htmlElement.style.bottom="auto",this._range.height=100-s;break;case"between":this._range.htmlElement.style.bottom=s.toString()+"%",this._range.htmlElement.style.top="",this._range.height=a-s}else switch(this._range.htmlElement.style.top="",this._range.htmlElement.style.bottom="",this._range.height=null,this._range.rangeType){case"min":this._range.htmlElement.style.left="0",this._range.htmlElement.style.right="auto",this._range.width=s;break;case"max":this._range.htmlElement.style.left="auto",this._range.htmlElement.style.right="0",this._range.width=100-s;break;case"between":this._range.htmlElement.style.left=s.toString()+"%",this._range.htmlElement.style.right="",this._range.width=a-s}}},e.prototype._updateClassNames=function(e){var t,s,i,n,r,l,o,c,h,u,d,m,_,p,v,f,b,g,y,E,P,w;if((null===(c=null===(o=this._cachedAbacusProperty)||void 0===o?void 0:o.classes)||void 0===c?void 0:c.abacus)!==(null==e?void 0:e.abacus)&&(this._widgetContainer.className=null==e?void 0:e.abacus),(null===(u=null===(h=this._cachedAbacusProperty)||void 0===h?void 0:h.classes)||void 0===u?void 0:u.vertical)!==(null==e?void 0:e.vertical)&&(this._widgetContainer.classNameVertical=null==e?void 0:e.vertical),(null===(m=null===(d=this._cachedAbacusProperty)||void 0===d?void 0:d.classes)||void 0===m?void 0:m.disabled)!==(null==e?void 0:e.disabled)&&(this._widgetContainer.classNameDisabled=null==e?void 0:e.disabled),(null===(p=null===(_=this._cachedAbacusProperty)||void 0===_?void 0:_.classes)||void 0===p?void 0:p.handle)!==(null==e?void 0:e.handle))for(var N=0;N<this._handles.length;N++)this._handles[N].className=null==e?void 0:e.handle;if((null===(f=null===(v=this._cachedAbacusProperty)||void 0===v?void 0:v.classes)||void 0===f?void 0:f.range)!==(null==e?void 0:e.range)&&(this._range.className=null==e?void 0:e.range),(null===(g=null===(b=this._cachedAbacusProperty)||void 0===b?void 0:b.classes)||void 0===g?void 0:g.mark)!==(null==e?void 0:e.mark))try{for(var S=a(this._mapScale),V=S.next();!V.done;V=S.next()){var x=V.value;(null==e?void 0:e.mark)&&(x[1].className=e.mark)}}catch(e){t={error:e}}finally{try{V&&!V.done&&(s=S.return)&&s.call(S)}finally{if(t)throw t.error}}if((null===(E=null===(y=this._cachedAbacusProperty)||void 0===y?void 0:y.classes)||void 0===E?void 0:E.markSelected)!==(null==e?void 0:e.markSelected))try{for(var L=a(this._mapScale),k=L.next();!k.done;k=L.next())x=k.value,(null==e?void 0:e.markSelected)&&(x[1].classNameSelected=e.markSelected)}catch(e){i={error:e}}finally{try{k&&!k.done&&(n=L.return)&&n.call(L)}finally{if(i)throw i.error}}if((null===(w=null===(P=this._cachedAbacusProperty)||void 0===P?void 0:P.classes)||void 0===w?void 0:w.markInrange)!==(null==e?void 0:e.markInrange))try{for(var M=a(this._mapScale),C=M.next();!C.done;C=M.next())x=C.value,(null==e?void 0:e.markInrange)&&(x[1].classNameInrange=e.markInrange)}catch(e){r={error:e}}finally{try{C&&!C.done&&(l=M.return)&&l.call(M)}finally{if(r)throw r.error}}},e.prototype.toggleDisable=function(e){this._isDisabled=null==e?!this._isDisabled:!!e,this._widgetContainer.isDisabled(this._isDisabled)},e.prototype._getEventUIData=function(){var e={};this._currentHandle&&(e.handle=this._currentHandle.htmlElement,e.handleIndex=this._currentHandle.handleIndex);var t=this._presenter.getModelAbacusProperty();return e.abacusProperty=this._getCloneAbacusProperty(t),e},e.prototype._eventChangeWrapper=function(e){e||(e=this._customEventChange);var t=this._widgetContainer.htmlElement.dispatchEvent(this._customEventChange),s=this._presenter.getModelAbacusProperty();return"function"==typeof(null==s?void 0:s.change)&&s.change(e,this._getEventUIData()),t},e.prototype._eventCreateWrapper=function(e){e||(e=this._customEventCreate);var t=this._widgetContainer.htmlElement.dispatchEvent(this._customEventCreate),s=this._presenter.getModelAbacusProperty();return"function"==typeof(null==s?void 0:s.create)&&s.create(e,this._getEventUIData()),t},e.prototype._eventSlideWrapper=function(e){e||(e=this._customEventSlide);var t=this._widgetContainer.htmlElement.dispatchEvent(this._customEventSlide),s=this._presenter.getModelAbacusProperty();return"function"==typeof(null==s?void 0:s.slide)&&s.slide(e,this._getEventUIData()),t},e.prototype._eventStartWrapper=function(e){e||(e=this._customEventStart);var t=this._widgetContainer.htmlElement.dispatchEvent(this._customEventStart),s=this._presenter.getModelAbacusProperty();return"function"==typeof(null==s?void 0:s.start)&&s.start(e,this._getEventUIData()),t},e.prototype._eventStopWrapper=function(e){e||(e=this._customEventStop);var t=this._widgetContainer.htmlElement.dispatchEvent(this._customEventStop),s=this._presenter.getModelAbacusProperty();return"function"==typeof(null==s?void 0:s.stop)&&s.stop(e,this._getEventUIData()),t},e.prototype._mouseHandler=function(e){var t,s,a=this,i=a._presenter.getModelAbacusProperty();if((null===(t=i.values)||void 0===t?void 0:t.length)&&a._currentHandle){var n=0;e instanceof MouseEvent?n=this._isVertical?e.clientY:e.clientX:e instanceof TouchEvent&&(n=this._isVertical?e.changedTouches[0].screenY:e.changedTouches[0].screenX);var r=this.getPosPercent(n),l=this.getValFromPosPercent(r),o=null===(s=i.values)||void 0===s?void 0:s.slice(0);0===a._currentHandle.handleIndex&&(l>=i.values[1]?(o[0]=i.values[1],a._currentHandle=a._handles[1]):o[0]=l),1===a._currentHandle.handleIndex&&(l<=i.values[0]?(o[1]=i.values[0],a._currentHandle=a._handles[0]):o[1]=l),a._presenter.setAbacusValue(o)}},e.prototype._calcHandleValues=function(e){var t,s,a;if(!isNaN(e)){var i=this._presenter.getModelAbacusProperty();if(null===(t=i.values)||void 0===t?void 0:t.length){var n=[];if(i.values&&(n=null===(s=i.values)||void 0===s?void 0:s.slice(0)),!0===i.range&&(null===(a=i.values)||void 0===a?void 0:a.length)&&i.step){var r=i.values[0]-e;r=r<0?r*=-1:r;var l=i.values[1]-e;(l=l<0?l*=-1:l)<r?n[1]=e:n[0]=e}else n[0]=e;this._presenter.setAbacusValue(n)}}},e.prototype._bindEventListeners=function(){var e=this;e._presenter.eventTarget.addEventListener("update-model",this._updateModelHandler.bind(this)),e._widgetContainer.htmlElement.addEventListener("click",e._handlerWidgetContainerClick.bind(e)),e._widgetContainer.htmlElement.addEventListener("touchend",e._handlerWidgetContainerClick.bind(e)),document.addEventListener("mousemove",e._handlerHandleItemClickMove.bind(e),{passive:!0}),document.addEventListener("touchmove",e._handlerHandleItemClickMove.bind(e),{passive:!0}),document.addEventListener("mouseup",e._handlerHandleItemClickStop.bind(e)),document.addEventListener("touchend",e._handlerHandleItemClickStop.bind(e)),document.addEventListener("touchcancel",e._handlerHandleItemClickStop.bind(e))},e.prototype._updateModelHandler=function(){this.updateView()},e.prototype._handlerWidgetContainerClick=function(e){var t,s,a,i;e.preventDefault();var n=this,r=n._presenter.getModelAbacusProperty(),l=e.target,o=(null===(t=r.classes)||void 0===t?void 0:t.handle)?null===(s=r.classes)||void 0===s?void 0:s.handle:"",c=(null===(a=r.classes)||void 0===a?void 0:a.mark)?null===(i=r.classes)||void 0===i?void 0:i.mark:"";if(!(n._isDisabled||l.classList.contains(o)||l.classList.contains(c))){var h=0;e instanceof MouseEvent?h=this._isVertical?e.clientY:e.clientX:e instanceof TouchEvent&&(h=this._isVertical?e.changedTouches[0].screenY:e.changedTouches[0].screenX);var u=this.getPosPercent(h),d=this.getValFromPosPercent(u);n._calcHandleValues(d)}},e.prototype._handlerHandleItemClickStart=function(e){e.preventDefault();var t=this;t._isDisabled||(t._isDragHandle=!0,t._eventStartWrapper(e))},e.prototype._handlerHandleItemClickMove=function(e){var t=this;t._isDisabled||(null!==t._handleMovingTimer&&clearTimeout(t._handleMovingTimer),t._handleMovingTimer=setTimeout((function(){t._isDragHandle&&t._mouseHandler(e)}),5))},e.prototype._handlerHandleItemClickStop=function(e){var t=this;t._isDragHandle&&t._eventStopWrapper(e),t._isDragHandle=!1},e.prototype._createScale=function(){var t,s,i,n;this._mapScale.size&&this._removeScale();var r=this._presenter.getModelAbacusProperty();if(void 0!==r.min&&void 0!==r.max&&void 0!==r.step){for(var l=r.min;l<=r.max;l+=r.step){l=e.round(l,r.step);var c=new o.Mark(r.classes),h=this.getPosFromValue(l);this._isVertical?c.posBottom=h:c.posLeft=h,c.htmlElement.innerText=l.toString(),this._mapScale.set(l,c)}l!==r.max&&(c=new o.Mark(r.classes),h=this.getPosFromValue(r.max),this._isVertical?c.posBottom=h:c.posLeft=h,c.htmlElement.innerText=r.max.toString(),this._mapScale.set(l,c))}if(this._widgetContainer.htmlElement.contains(this._handles[0].htmlElement))try{for(var u=a(this._mapScale.values()),d=u.next();!d.done;d=u.next())c=d.value,this._handles[0].htmlElement.before(c.htmlElement)}catch(e){t={error:e}}finally{try{d&&!d.done&&(s=u.return)&&s.call(u)}finally{if(t)throw t.error}}else try{for(var m=a(this._mapScale.values()),_=m.next();!_.done;_=m.next())c=_.value,this._widgetContainer.htmlElement.append(c.htmlElement)}catch(e){i={error:e}}finally{try{_&&!_.done&&(n=m.return)&&n.call(m)}finally{if(i)throw i.error}}this._thinOutScale(),this._bindEventListenersOnMarks()},e.prototype._removeScale=function(){var e,t;try{for(var s=a(this._mapScale.values()),i=s.next();!i.done;i=s.next())i.value.htmlElement.remove()}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}this._mapScale.clear()},e.prototype._thinOutScale=function(){var e,t,s,i,n,r,l,o,c,h,u,d;d=this._isVertical?this._widgetContainer.htmlElement.offsetHeight:this._widgetContainer.htmlElement.offsetWidth;var m=0;if(this._isVertical)try{for(var _=a(this._mapScale.values()),p=_.next();!p.done;p=_.next())m+=(V=p.value).htmlElement.offsetHeight+7}catch(t){e={error:t}}finally{try{p&&!p.done&&(t=_.return)&&t.call(_)}finally{if(e)throw e.error}}else try{for(var v=a(this._mapScale.values()),f=v.next();!f.done;f=v.next())m+=(V=f.value).htmlElement.offsetWidth+7}catch(e){s={error:e}}finally{try{f&&!f.done&&(i=v.return)&&i.call(v)}finally{if(s)throw s.error}}if(d<m){var b=this._presenter.getModelAbacusProperty();if(void 0!==b.min&&void 0!==b.max&&void 0!==b.step){var g=!1;try{for(var y=a(this._mapScale),E=y.next();!E.done;E=y.next())(V=E.value)[0]===b.min||V[0]===b.max||g?g=!1:(null===(u=V[1])||void 0===u||u.htmlElement.remove(),this._mapScale.delete(V[0]),g=!0)}catch(e){n={error:e}}finally{try{E&&!E.done&&(r=y.return)&&r.call(y)}finally{if(n)throw n.error}}}}if(m=0,this._isVertical)try{for(var P=a(this._mapScale.values()),w=P.next();!w.done;w=P.next())m+=(V=w.value).htmlElement.offsetHeight+7}catch(e){l={error:e}}finally{try{w&&!w.done&&(o=P.return)&&o.call(P)}finally{if(l)throw l.error}}else try{for(var N=a(this._mapScale.values()),S=N.next();!S.done;S=N.next()){var V;m+=(V=S.value).htmlElement.offsetWidth+7}}catch(e){c={error:e}}finally{try{S&&!S.done&&(h=N.return)&&h.call(N)}finally{if(c)throw c.error}}d<m&&this._thinOutScale()},e.prototype._highlightMarks=function(){var e,t,s;if(this._mapScale.size){var i=this._presenter.getModelAbacusProperty(),n=i.range;if(void 0!==i.min&&void 0!==i.max&&void 0!==i.step&&(null===(s=i.values)||void 0===s?void 0:s.length))try{for(var r=a(this._mapScale),l=r.next();!l.done;l=r.next()){var o=l.value,c=o[0]>=i.values[0]&&o[0]<=i.values[1];"min"===n&&o[0]<=i.values[0]||"max"===n&&o[0]>=i.values[0]||!0===n&&c?o[1].isInrange(!0):o[1].isInrange(!1),o[0]===i.values[0]||o[0]===i.values[1]?o[1].isSelected(!0):o[1].isSelected(!1)}}catch(t){e={error:t}}finally{try{l&&!l.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}}},e.prototype._bindEventListenersOnMarks=function(){var e,t,s=this,i=function(e){e[1].htmlElement.addEventListener("click",(function(){var t,a=s;if(!a._isDisabled){var i=e[0];(null===(t=a._cachedAbacusProperty)||void 0===t?void 0:t.value)!==i&&a._calcHandleValues(i)}})),e[1].htmlElement.addEventListener("touchend",(function(){var t,a=s;if(!a._isDisabled){var i=e[0];(null===(t=a._cachedAbacusProperty)||void 0===t?void 0:t.value)!==i&&a._calcHandleValues(i)}}))};try{for(var n=a(this._mapScale),r=n.next();!r.done;r=n.next())i(r.value)}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},e.prototype._setTransition=function(){var e,t,s="",i=this._presenter.getModelAbacusProperty().animate;"number"==typeof i&&i>0?s=i.toString():!0===i?s="400":"slow"===i?s="600":"fast"===i&&(s="200"),s=s?s+"ms":"";for(var n=0;n<this._handles.length;n++)this._handles[n].htmlElement.style.transition=s,this._tooltips[n]&&(this._tooltips[n].htmlElement.style.transition=s);if(this._range.htmlElement.style.transition=s,this._mapScale)try{for(var r=a(this._mapScale),l=r.next();!l.done;l=r.next())l.value[1].htmlElement.style.transition=s}catch(t){e={error:t}}finally{try{l&&!l.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},e.prototype._getCloneAbacusProperty=function(e){var t,s={};return Object.assign(s,e),s.values=null===(t=e.values)||void 0===t?void 0:t.slice(0),Object.assign(s.classes,e.classes),s},e.prototype._findMovedHandle=function(){var e,t,s=this._presenter.getModelAbacusProperty();return this._currentHandle=this._handles[0],(null===(e=this._cachedAbacusProperty.values)||void 0===e?void 0:e.length)&&(null===(t=s.values)||void 0===t?void 0:t.length)&&this._cachedAbacusProperty.values[1]!==s.values[1]&&(this._currentHandle=this._handles[1]),this._currentHandle},e.countNumAfterPoint=function(e){var t=e.toString();return~(t+"").indexOf(".")?(t+"").split(".")[1].length:0},e.round=function(t,s){var a=e.countNumAfterPoint(s);return a>0?parseFloat(t.toFixed(a)):Math.round(t)},e.arrayCompare=function(e,t){if(!e||!t)return!1;if((null==e?void 0:e.length)!==(null==t?void 0:t.length))return!1;for(var s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0},e}();t.View=h},5064:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetContainer=void 0;var s=function(){function e(e,t){this._width=100,this._htmlElement=e,this._className=(null==t?void 0:t.abacus)?t.abacus:"abacus",this._classNameDisabled=(null==t?void 0:t.disabled)?t.disabled:"abacus_disabled",this._classNameVertical=(null==t?void 0:t.vertical)?t.vertical:"abacus_vertical",this._htmlElement.classList.add(this._className)}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"htmlElement",{get:function(){return this._htmlElement},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},set:function(e){this._htmlElement.classList.remove(this._className),this._htmlElement.classList.add(e),this._className=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"classNameDisabled",{get:function(){return this._classNameDisabled},set:function(e){e&&"string"==typeof e&&(this._htmlElement.classList.contains(this._classNameDisabled)&&this._htmlElement.classList.add(e),this._classNameDisabled&&this._htmlElement.classList.remove(this._classNameDisabled),this._classNameDisabled=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"classNameVertical",{get:function(){return this._classNameVertical},set:function(e){e&&"string"==typeof e&&(this._htmlElement.classList.contains(this._classNameVertical)&&this._htmlElement.classList.add(e),this._classNameVertical&&this._htmlElement.classList.remove(this._classNameVertical),this._classNameVertical=e)},enumerable:!1,configurable:!0}),e.prototype.isDisabled=function(e){void 0!==e&&this._classNameDisabled&&(e?this._htmlElement.classList.add(this._classNameDisabled):this._htmlElement.classList.remove(this._classNameDisabled))},e.prototype.isVertical=function(e){void 0!==e&&this._classNameVertical&&(e?this._htmlElement.classList.add(this._classNameVertical):this._htmlElement.classList.remove(this._classNameVertical))},e}();t.WidgetContainer=s},8882:function(e,t,s){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(s(3609)),n=s(6958);i.default.fn.abacus=function(e,t,s){var a=this;return this.each((function(){var i,r=this;if(r.jqueryAbacusInstance instanceof n.View?i=r.jqueryAbacusInstance:(i="object"==typeof e?new n.View(r,e):new n.View(r),r.jqueryAbacusInstance=i),"string"==typeof e){var l=void 0;switch(e){case"destroy":break;case"disable":i.option("disabled",!0);break;case"enable":i.option("disabled",!1);break;case"instance":a=i;break;case"option":void 0!==typeof(l="object"==typeof t?i.option(void 0,t):"string"==typeof t?i.option(t,s):i.option())&&(a=l);break;case"value":void 0!==typeof(l=i.option("value",s))&&(a=l)}}})),a}},3609:e=>{"use strict";e.exports=jQuery}},t={};function s(a){if(t[a])return t[a].exports;var i=t[a]={exports:{}};return e[a].call(i.exports,i,i.exports,s),i.exports}s(8882),s(5160)})();
//# sourceMappingURL=abacus.js.map?v=14a4272cb59f3548a5ef