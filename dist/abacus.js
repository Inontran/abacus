/*! For license information please see abacus.js.LICENSE.txt */
(()=>{var e={1843:e=>{var t={};try{t.EventTarget=(new EventTarget).constructor}catch(e){!function(e,s){var a=e.create,i=e.defineProperty,n=l.prototype;function l(){"use strict";s.set(this,a(null))}function r(e,t,s){i(e,t,{configurable:!0,writable:!0,value:s})}function o(e){var t=e.options;t&&t.once&&e.target.removeEventListener(this.type,e.listener),"function"==typeof e.listener?e.listener.call(e.target,this):e.listener.handleEvent(this)}r(n,"addEventListener",(function(e,t,a){for(var i=s.get(this),n=i[e]||(i[e]=[]),l=0,r=n.length;l<r;l++)if(n[l].listener===t)return;n.push({target:this,listener:t,options:a})})),r(n,"dispatchEvent",(function(e){var t=s.get(this)[e.type];return t&&(r(e,"target",this),r(e,"currentTarget",this),t.slice(0).forEach(o,e),delete e.currentTarget,delete e.target),!0})),r(n,"removeEventListener",(function(e,t){for(var a=s.get(this),i=a[e]||(a[e]=[]),n=0,l=i.length;n<l;n++)if(i[n].listener===t)return void i.splice(n,1)})),t.EventTarget=l}(Object,new WeakMap)}e.exports=t.EventTarget},5160:()=>{},1162:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){this._posLeft=null,this._posBottom=null,this._handleIndex=0,this._htmlElement=document.createElement("span"),this._className=(null==e?void 0:e.handle)?e.handle:"abacus__handle",this._htmlElement.classList.add(this._className),void 0===t||Number.isNaN(t)||(this._handleIndex=t)}return Object.defineProperty(e.prototype,"posLeft",{get:function(){return this._posLeft},set:function(e){if(null===e)this._posLeft=e,this._htmlElement.style.left="";else{var t=e;e<0&&(t=0),e>100&&(t=100),this._posLeft=t,this._htmlElement.style.left=t.toString()+"%"}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"posBottom",{get:function(){return this._posBottom},set:function(e){if(null===e)this._posBottom=e,this._htmlElement.style.bottom="";else{var t=e;e<0&&(t=0),e>100&&(t=100),this._posBottom=t,this._htmlElement.style.bottom=t.toString()+"%"}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"htmlElement",{get:function(){return this._htmlElement},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"handleIndex",{get:function(){return this._handleIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},set:function(e){this._htmlElement.classList.remove(this._className),this._htmlElement.classList.add(e),this._className=e},enumerable:!1,configurable:!0}),e}();t.default=s},6565:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e){this._isInrange=!1,this._classNameSelected="",this._isSelected=!1,this._posLeft=null,this._posBottom=null,this._htmlElement=document.createElement("span"),this._className=(null==e?void 0:e.mark)?e.mark:"abacus__mark",this._classNameInrange=(null==e?void 0:e.markInrange)?e.markInrange:"abacus__mark_inrange",this._classNameSelected=(null==e?void 0:e.markSelected)?e.markSelected:"abacus__mark_selected",this._htmlElement.classList.add(this._className)}return Object.defineProperty(e.prototype,"htmlElement",{get:function(){return this._htmlElement},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},set:function(e){this._className&&this._htmlElement.classList.remove(this._className),e&&this._htmlElement.classList.add(e),this._className=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"classNameInrange",{get:function(){return this._classNameInrange},set:function(e){e&&"string"==typeof e&&(this._htmlElement.classList.contains(this._classNameInrange)&&this._htmlElement.classList.add(e),this._classNameInrange&&this._htmlElement.classList.remove(this._classNameInrange),this._classNameInrange=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"classNameSelected",{get:function(){return this._classNameSelected},set:function(e){e&&"string"==typeof e&&(this._htmlElement.classList.contains(this._classNameSelected)&&this._htmlElement.classList.add(e),this._classNameSelected&&this._htmlElement.classList.remove(this._classNameSelected),this._classNameSelected=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"posLeft",{get:function(){return this._posLeft},set:function(e){if(null===e)this._posLeft=e,this._htmlElement.style.left="";else{var t=e;e<0&&(t=0),e>100&&(t=100),this._posLeft=t,this._htmlElement.style.left=t.toString()+"%"}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"posBottom",{get:function(){return this._posBottom},set:function(e){if(null===e)this._posBottom=e,this._htmlElement.style.bottom="";else{var t=e;e<0&&(t=0),e>100&&(t=100),this._posBottom=t,this._htmlElement.style.bottom=t.toString()+"%"}},enumerable:!1,configurable:!0}),e.prototype.isInrange=function(e){return void 0!==e&&this._classNameInrange&&(this._isInrange=!!e,this._isInrange?this._htmlElement.classList.add(this._classNameInrange):this._htmlElement.classList.remove(this._classNameInrange)),this._isInrange},e.prototype.isSelected=function(e){return void 0!==e&&this._classNameSelected&&(this._isSelected=!!e,this._isSelected?this._htmlElement.classList.add(this._classNameSelected):this._htmlElement.classList.remove(this._classNameSelected)),this._isSelected},e}();t.default=s},9482:function(e,t,s){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(s(1843)),n=function(){function e(e){this._abacusProperty={animate:!1,classes:{abacus:"abacus",vertical:"abacus_vertical",disabled:"abacus_disabled",handle:"abacus__handle",range:"abacus__range",mark:"abacus__mark",markSelected:"abacus__mark_selected",markInrange:"abacus__mark_inrange",tooltip:"abacus__tooltip",tooltipVisible:"abacus__tooltip_visible"},disabled:!1,max:100,min:0,orientation:"horizontal",range:!1,scale:!1,step:1,tooltip:!1,value:0,values:[0]},e&&(this.abacusProperty=e),this._eventTarget=new i.default,this._eventUpdateModel=new CustomEvent("update-model")}return Object.defineProperty(e.prototype,"abacusProperty",{get:function(){return this._abacusProperty},set:function(e){var t,s,a,i,n,l=e;if(void 0!==l.animate){var r="fast"===l.animate||"slow"===l.animate,o="boolean"==typeof l.animate;r||o?this._abacusProperty.animate=l.animate:null==l.animate?this._abacusProperty.animate=!1:Number.isNaN(l.animate)||(this._abacusProperty.animate=parseInt(l.animate,10))}if("object"==typeof l.classes&&(this._abacusProperty.classes||(this._abacusProperty.classes={}),"string"==typeof l.classes.abacus&&l.classes.abacus&&(this._abacusProperty.classes.abacus=l.classes.abacus),"string"==typeof l.classes.disabled&&l.classes.disabled&&(this._abacusProperty.classes.disabled=l.classes.disabled),"string"==typeof l.classes.range&&l.classes.range&&(this._abacusProperty.classes.range=l.classes.range),"string"==typeof l.classes.handle&&l.classes.handle&&(this._abacusProperty.classes.handle=l.classes.handle),"string"==typeof l.classes.mark&&l.classes.mark&&(this._abacusProperty.classes.mark=l.classes.mark),"string"==typeof l.classes.markSelected&&l.classes.markSelected&&(this._abacusProperty.classes.markSelected=l.classes.markSelected),"string"==typeof l.classes.markInrange&&l.classes.markInrange&&(this._abacusProperty.classes.markInrange=l.classes.markInrange),"string"==typeof l.classes.tooltip&&l.classes.tooltip&&(this._abacusProperty.classes.tooltip=l.classes.tooltip),"string"==typeof l.classes.tooltipVisible&&l.classes.tooltipVisible&&(this._abacusProperty.classes.tooltipVisible=l.classes.tooltipVisible)),void 0!==l.disabled&&(this._abacusProperty.disabled=!!l.disabled),void 0!==l.max&&null!==l.max&&(Number.isNaN(l.max)||("string"==typeof l.max?this._abacusProperty.max=parseFloat(l.max):this._abacusProperty.max=l.max)),void 0!==l.scale&&(this._abacusProperty.scale=!!l.scale),void 0!==l.min&&null!==l.min&&(Number.isNaN(l.min)||("string"==typeof l.min?this._abacusProperty.min=parseFloat(l.min):this._abacusProperty.min=l.min)),this._abacusProperty.max<this._abacusProperty.min){var c=this._abacusProperty.max;this._abacusProperty.max=this._abacusProperty.min,this._abacusProperty.min=c}if(void 0!==l.step&&null!==l.step&&(Number.isNaN(l.step)||("string"==typeof l.step?this._abacusProperty.step=parseFloat(l.step):this._abacusProperty.step=l.step)),void 0!==l.tooltip&&(this._abacusProperty.tooltip=!!l.tooltip),void 0!==l.range&&(!1===l.range||!0===l.range?this._abacusProperty.range=l.range:"max"===l.range?this._abacusProperty.range="max":"min"===l.range&&(this._abacusProperty.range="min")),void 0!==l.value&&null!==l.value&&(Number.isNaN(l.value)||("string"==typeof l.value&&(l.value=parseFloat(l.value)),l.value=this.roundValuePerStep(l.value),this._abacusProperty.value=l.value,(null===(t=this._abacusProperty.values)||void 0===t?void 0:t.length)||(this._abacusProperty.values=[]),this._abacusProperty.values[0]=l.value)),null===(s=l.values)||void 0===s?void 0:s.length){this._abacusProperty.values=[];for(var h=0;h<l.values.length&&("string"==typeof l.values[h]&&(l.values[h]=parseFloat(l.values[h].toString())),l.values[h]=this.roundValuePerStep(l.values[h]),this._abacusProperty.values[h]=l.values[h],0===h&&(this._abacusProperty.value=l.values[h]),!(h>1));h+=1);this._abacusProperty.values.sort((function(e,t){return e>t?1:e===t?0:-1}))}!0===this._abacusProperty.range?(null===(a=this._abacusProperty.values)||void 0===a?void 0:a.length)?1===(null===(i=this._abacusProperty.values)||void 0===i?void 0:i.length)&&(this._abacusProperty.values[1]=this._abacusProperty.max?this._abacusProperty.max:100):(this._abacusProperty.values=[],this._abacusProperty.values[0]=this._abacusProperty.min?this._abacusProperty.min:0,this._abacusProperty.values[1]=this._abacusProperty.max?this._abacusProperty.max:100):this._abacusProperty.values=null===(n=this._abacusProperty.values)||void 0===n?void 0:n.slice(0,1),void 0!==l.orientation&&("vertical"===l.orientation?this._abacusProperty.orientation="vertical":this._abacusProperty.orientation="horizontal"),void 0!==l.change&&(this._abacusProperty.change=l.change),void 0!==l.create&&(this._abacusProperty.create=l.create),void 0!==l.slide&&(this._abacusProperty.slide=l.slide),void 0!==l.start&&(this._abacusProperty.start=l.start),void 0!==l.stop&&(this._abacusProperty.stop=l.stop),this._eventTarget&&this._eventTarget.dispatchEvent(this._eventUpdateModel)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{set:function(e){var t;this._abacusProperty.value=this.roundValuePerStep(e),(null===(t=this._abacusProperty.values)||void 0===t?void 0:t.length)||(this._abacusProperty.values=[]),this._abacusProperty.values[0]=this._abacusProperty.value,this._eventTarget&&this._eventTarget.dispatchEvent(this._eventUpdateModel)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"eventTarget",{get:function(){return this._eventTarget},enumerable:!1,configurable:!0}),e.prototype.roundValuePerStep=function(t){var s=t,a=this._abacusProperty.min,i=this._abacusProperty.max,n=this._abacusProperty.step;if(t>=i)return i;if(t<=a)return a;for(var l=a;l<i;l+=n)if(t>l&&t<l+n){if(l+n>i){s=i;break}var r=l<0?-1*l:l,o=l+n,c=o<0?-1*o:o,h=t<0?-1*t:t,u=void 0,d=void 0;t<0?(u=r-h,d=h-c):(u=h-r,d=c-h),s=u<d?l:o;break}return e.round(s,n)},e.countNumAfterPoint=function(e){var t=e.toString();return(""+t).indexOf(".")>=0?(""+t).split(".")[1].length:0},e.round=function(t,s){var a=e.countNumAfterPoint(s);return a>0?parseFloat(t.toFixed(a)):Math.round(t)},e}();t.default=n},8709:function(e,t,s){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(s(1843)),n=a(s(9482)),l=function(){function e(e){this._model=new n.default(e),this._eventTarget=new i.default,this._eventUpdateModel=new CustomEvent("update-model"),this._bindEventListeners()}return e.prototype.getModelAbacusProperty=function(){return this._model.abacusProperty},e.prototype.setModelAbacusProperty=function(e){this._model.abacusProperty=e},e.prototype.setAbacusValue=function(e){this._model.abacusProperty={values:[e[0],e[1]]}},e.prototype._bindEventListeners=function(){this._model.eventTarget.addEventListener("update-model",this._updateModelHandler.bind(this))},e.prototype._updateModelHandler=function(){this._eventTarget.dispatchEvent(this._eventUpdateModel)},Object.defineProperty(e.prototype,"eventTarget",{get:function(){return this._eventTarget},enumerable:!1,configurable:!0}),e}();t.default=l},9634:(e,t)=>{"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.HIDDEN="hidden",e.MIN="min",e.MAX="max",e.BETWEEN="between"}(s||(s={}));var a=function(){function e(e){this._width=100,this._height=100,this._rangeType=s.HIDDEN,this._htmlElement=document.createElement("span"),this._className=(null==e?void 0:e.range)?e.range:"abacus__range",this._htmlElement.classList.add(this._className)}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(e){if(null===e)this._width=e,this._htmlElement.style.width="";else{var t=e;e<0&&(t=0),e>100&&(t=100),this._width=t,this._htmlElement.style.width=t.toString()+"%"}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(e){if(null===e)this._height=e,this._htmlElement.style.height="";else{var t=e;e<0&&(t=0),e>100&&(t=100),this._height=t,this._htmlElement.style.height=t.toString()+"%"}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"htmlElement",{get:function(){return this._htmlElement},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},set:function(e){this._htmlElement.classList.remove(this._className),this._htmlElement.classList.add(e),this._className=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rangeType",{get:function(){return this._rangeType},set:function(e){"hidden"!==e&&"min"!==e&&"max"!==e&&"between"!==e&&(this._rangeType=s.HIDDEN),this._rangeType=e},enumerable:!1,configurable:!0}),e}();t.default=a},7768:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){this._tooltipIndex=0,this._isVisible=!1,this._posLeft=null,this._posBottom=null,this._htmlElement=document.createElement("span"),this._className=(null==e?void 0:e.tooltip)?e.tooltip:"abacus__tooltip",this._classNameVisible=(null==e?void 0:e.tooltipVisible)?e.tooltipVisible:"abacus__tooltip_visible",this._htmlElement.classList.add(this._className),void 0===t||Number.isNaN(t)||(this._tooltipIndex=t)}return Object.defineProperty(e.prototype,"htmlElement",{get:function(){return this._htmlElement},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},set:function(e){this._className&&this._htmlElement.classList.remove(this._className),e&&this._htmlElement.classList.add(e),this._className=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"classNameVisible",{get:function(){return this._classNameVisible},set:function(e){e&&"string"==typeof e&&(this._htmlElement.classList.contains(this._classNameVisible)&&this._htmlElement.classList.add(e),this._classNameVisible&&this._htmlElement.classList.remove(this._classNameVisible),this._classNameVisible=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"posLeft",{get:function(){return this._posLeft},set:function(e){if(null===e)this._posLeft=e,this._htmlElement.style.left="";else{var t=e;e<0&&(t=0),e>100&&(t=100),this._posLeft=t,this._htmlElement.style.left=t.toString()+"%"}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"posBottom",{get:function(){return this._posBottom},set:function(e){if(null===e)this._posBottom=e,this._htmlElement.style.bottom="";else{var t=e;e<0&&(t=0),e>100&&(t=100),this._posBottom=t,this._htmlElement.style.bottom=t.toString()+"%"}},enumerable:!1,configurable:!0}),e.prototype.isVisible=function(e){return void 0!==e&&this._classNameVisible&&(this._isVisible=!!e,this._isVisible?this._htmlElement.classList.add(this._classNameVisible):this._htmlElement.classList.remove(this._classNameVisible)),this._isVisible},e}();t.default=s},6958:function(e,t,s){"use strict";var a=this&&this.__read||function(e,t){var s="function"==typeof Symbol&&e[Symbol.iterator];if(!s)return e;var a,i,n=s.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=n.next()).done;)l.push(a.value)}catch(e){i={error:e}}finally{try{a&&!a.done&&(s=n.return)&&s.call(n)}finally{if(i)throw i.error}}return l},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,s=t&&e[t],a=0;if(s)return s.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=n(s(8709)),r=n(s(5064)),o=n(s(1162)),c=n(s(9634)),h=n(s(6565)),u=n(s(7768)),d=function(){function e(e,t){this._handles=[],this._tooltips=[],this._isDisabled=!1,this._isDragHandle=!1,this._handleMovingTimer=null,this._mapScale=new Map,this._cachedAbacusProperty={},this._isVertical=!1,this._presenter=new l.default(t);var s=this._presenter.getModelAbacusProperty();this._widgetContainer=new r.default(e,s.classes),this._widgetContainer.htmlElement.innerHTML="",this._range=new c.default(s.classes),this._tooltips[0]=new u.default(s.classes,0),this._customEventChange=new CustomEvent("abacus-change",{bubbles:!0,cancelable:!0}),this._customEventCreate=new CustomEvent("abacus-create",{bubbles:!0,cancelable:!0}),this._customEventSlide=new CustomEvent("abacus-slide",{bubbles:!0,cancelable:!0}),this._customEventStart=new CustomEvent("abacus-start",{bubbles:!0,cancelable:!0}),this._customEventStop=new CustomEvent("abacus-stop",{bubbles:!0,cancelable:!0}),this.updateView(),this._bindEventListeners(),this._eventCreateWrapper()}return e.prototype.getPosPercent=function(e){var t=0;return(t=this._isVertical?100-(t=(e-this._widgetContainer.htmlElement.getBoundingClientRect().top)/this._widgetContainer.htmlElement.getBoundingClientRect().height*100):(e-this._widgetContainer.htmlElement.getBoundingClientRect().left)/this._widgetContainer.htmlElement.getBoundingClientRect().width*100)<0&&(t=0),t>100&&(t=100),t},e.prototype.getPosPerStep=function(e){var t=0,s=this._presenter.getModelAbacusProperty(),a=s.min,i=s.max,n=s.step/(i-a)*100;return t=e/n,(t=Math.round(t))*n},e.prototype.getPosFromValue=function(e){var t,s=this._presenter.getModelAbacusProperty(),a=s.min,i=s.max,n=e;return a<0&&(i+=-1*a,n+=-1*a),(t=n/i*100)<0?0:t>100?100:t},e.prototype.getValFromPosPercent=function(e){var t=this._presenter.getModelAbacusProperty(),s=t.min,a=t.max;return s<0&&(a+=-1*s),a*e/100- -1*s},e.prototype.option=function(e,t){if("string"==typeof e)switch(e){case"animate":case"classes":case"disabled":case"max":case"scale":case"min":case"orientation":case"range":case"step":case"tooltip":case"value":case"values":if(void 0===t)return this._presenter.getModelAbacusProperty()[e];var s={};s[e]=t,this._presenter.setModelAbacusProperty(s)}else{if("object"!=typeof t)return this._presenter.getModelAbacusProperty();this._presenter.setModelAbacusProperty(t)}},e.prototype.updateView=function(){var t,s,a,i,n,l,r,o,c,h,u=this._presenter.getModelAbacusProperty(),d=(null===(t=this._cachedAbacusProperty)||void 0===t?void 0:t.range)!==u.range,m=(null===(s=this._cachedAbacusProperty)||void 0===s?void 0:s.orientation)!==u.orientation,_=(null===(a=this._cachedAbacusProperty)||void 0===a?void 0:a.tooltip)!==u.tooltip,p=(null===(i=this._cachedAbacusProperty)||void 0===i?void 0:i.animate)!==u.animate,v=(null===(n=this._cachedAbacusProperty)||void 0===n?void 0:n.max)!==u.max,f=(null===(l=this._cachedAbacusProperty)||void 0===l?void 0:l.min)!==u.min,b=!e.arrayCompare(null===(r=this._cachedAbacusProperty)||void 0===r?void 0:r.values,u.values),g=(null===(o=this._cachedAbacusProperty)||void 0===o?void 0:o.disabled)!==u.disabled,y=(null===(c=this._cachedAbacusProperty)||void 0===c?void 0:c.scale)!==u.scale,E=(null===(h=this._cachedAbacusProperty)||void 0===h?void 0:h.step)!==u.step;d&&(this._createViewHandles(u),this._createViewRange(u)),m&&("vertical"===u.orientation?(this._isVertical=!0,this._widgetContainer.isVertical(!0)):(this._isVertical=!1,this._widgetContainer.isVertical(!1))),(_||d)&&(this._createViewTooltips(u),this._updateViewTooltips(u),this._setTransition()),p&&this._setTransition(),(d||v||f||m||b)&&(this._updateViewHandles(u),this._updateViewTooltips(u),this._updateViewRange(u),this._highlightMarks()),b&&(this._findMovedHandle(),this._eventChangeWrapper()),u.classes&&this._updateClassNames(u.classes),g&&this.toggleDisable(u.disabled),(y||E||v||f||m)&&(u.scale?(this._createScale(),this._setTransition()):this._removeScale(),this._highlightMarks()),this._cachedAbacusProperty=e.getCloneAbacusProperty(u)},e.prototype._createViewHandles=function(e){var t,s=this,i=[];if(!(null===(t=s._handles)||void 0===t?void 0:t.length)){s._handles=[],s._handles[0]=new o.default(e.classes,0);var n=a(s._handles,1)[0];s._widgetContainer.htmlElement.append(n.htmlElement),s._currentHandle=n,i.push(0)}var l=a(s._handles,1)[0];switch(e.range){case!0:s._handles[1]=new o.default(e.classes,1),s._widgetContainer.htmlElement.append(s._handles[1].htmlElement),i.push(1);break;case"max":case"min":default:s._handles[1]&&(s._handles[1].htmlElement.remove(),s._handles=s._handles.slice(0,1)),s._currentHandle=l}for(var r=function(e){var t=i[e];s._handles[t].htmlElement.addEventListener("mousedown",(function(e){e.preventDefault(),s._isDisabled||(s._isDragHandle=!0,s._currentHandle=s._handles[t],s._eventStartWrapper(e))})),s._handles[t].htmlElement.addEventListener("touchstart",(function(e){e.preventDefault(),s._isDisabled||(s._isDragHandle=!0,s._currentHandle=s._handles[t],s._eventStartWrapper(e))}),{passive:!0})},c=0;c<i.length;c+=1)r(c)},e.prototype._updateViewHandles=function(e){if(e.values)for(var t=0;t<e.values.length;t+=1){var s=e.values[t],a=this.getPosFromValue(s);this._handles[t]&&(this._isVertical?(this._handles[t].posLeft=null,this._handles[t].posBottom=a):(this._handles[t].posBottom=null,this._handles[t].posLeft=a))}},e.prototype._createViewTooltips=function(e){for(var t=0;t<this._tooltips.length;t+=1)this._tooltips[t].htmlElement.remove();if(this._tooltips=[],e.tooltip){var s=!0===e.range?2:1;for(t=0;t<s;t+=1)this._tooltips[t]=new u.default(e.classes,t),this._widgetContainer.htmlElement.append(this._tooltips[t].htmlElement),this._tooltips[t].isVisible(!0)}},e.prototype._updateViewTooltips=function(e){if(e.values&&e.tooltip)for(var t=0;t<e.values.length;t+=1){var s=e.values[t],a=this.getPosFromValue(s);this._tooltips[t]&&(this._isVertical?(this._tooltips[t].posLeft=null,this._tooltips[t].posBottom=a):(this._tooltips[t].posBottom=null,this._tooltips[t].posLeft=a),this._tooltips[t].htmlElement.innerText=e.values[t].toString())}},e.prototype._createViewRange=function(e){switch(e.range){case"max":this._range.rangeType="max",this._widgetContainer.htmlElement.prepend(this._range.htmlElement);break;case!0:this._range.rangeType="between",this._widgetContainer.htmlElement.prepend(this._range.htmlElement);break;case"min":this._range.rangeType="min",this._widgetContainer.htmlElement.prepend(this._range.htmlElement);break;default:this._range.rangeType="hidden",this._range.htmlElement.remove()}},e.prototype._updateViewRange=function(e){var t;if(null===(t=e.values)||void 0===t?void 0:t.length){var s=this.getPosFromValue(e.values[0]),a=this.getPosFromValue(e.values[1]);if(this._isVertical)switch(this._range.htmlElement.style.left="",this._range.htmlElement.style.right="",this._range.width=null,this._range.rangeType){case"min":this._range.htmlElement.style.top="auto",this._range.htmlElement.style.bottom="0",this._range.height=s;break;case"max":this._range.htmlElement.style.top="0",this._range.htmlElement.style.bottom="auto",this._range.height=100-s;break;case"between":this._range.htmlElement.style.bottom=s.toString()+"%",this._range.htmlElement.style.top="",this._range.height=a-s}else switch(this._range.htmlElement.style.top="",this._range.htmlElement.style.bottom="",this._range.height=null,this._range.rangeType){case"min":this._range.htmlElement.style.left="0",this._range.htmlElement.style.right="auto",this._range.width=s;break;case"max":this._range.htmlElement.style.left="auto",this._range.htmlElement.style.right="0",this._range.width=100-s;break;case"between":this._range.htmlElement.style.left=s.toString()+"%",this._range.htmlElement.style.right="",this._range.width=a-s}}},e.prototype._updateClassNames=function(e){var t,s,a,i,n,l,r,o,c,h,u=this;if((null===(s=null===(t=this._cachedAbacusProperty)||void 0===t?void 0:t.classes)||void 0===s?void 0:s.abacus)!==(null==e?void 0:e.abacus)&&(this._widgetContainer.className=null==e?void 0:e.abacus),(null===(i=null===(a=this._cachedAbacusProperty)||void 0===a?void 0:a.classes)||void 0===i?void 0:i.vertical)!==(null==e?void 0:e.vertical)&&(this._widgetContainer.classNameVertical=null==e?void 0:e.vertical),(null===(l=null===(n=this._cachedAbacusProperty)||void 0===n?void 0:n.classes)||void 0===l?void 0:l.disabled)!==(null==e?void 0:e.disabled)&&(this._widgetContainer.classNameDisabled=null==e?void 0:e.disabled),(null===(o=null===(r=this._cachedAbacusProperty)||void 0===r?void 0:r.classes)||void 0===o?void 0:o.handle)!==(null==e?void 0:e.handle))for(var d=0;d<this._handles.length;d+=1)this._handles[d].className=null==e?void 0:e.handle;(null===(h=null===(c=this._cachedAbacusProperty)||void 0===c?void 0:c.classes)||void 0===h?void 0:h.range)!==(null==e?void 0:e.range)&&(this._range.className=null==e?void 0:e.range),this._mapScale.forEach((function(t){var s,a,i,n,l,r,o=t;(null===(a=null===(s=u._cachedAbacusProperty)||void 0===s?void 0:s.classes)||void 0===a?void 0:a.mark)!==(null==e?void 0:e.mark)&&(null==e?void 0:e.mark)&&(o.className=e.mark),(null===(n=null===(i=u._cachedAbacusProperty)||void 0===i?void 0:i.classes)||void 0===n?void 0:n.markSelected)!==(null==e?void 0:e.markSelected)&&(null==e?void 0:e.markInrange)&&(o.classNameSelected=e.markSelected),(null===(r=null===(l=u._cachedAbacusProperty)||void 0===l?void 0:l.classes)||void 0===r?void 0:r.markInrange)!==(null==e?void 0:e.markInrange)&&(null==e?void 0:e.markInrange)&&(o.classNameInrange=e.markInrange)}))},e.prototype.toggleDisable=function(e){this._isDisabled=null==e?!this._isDisabled:!!e,this._widgetContainer.isDisabled(this._isDisabled)},e.prototype._getEventUIData=function(){var t={};this._currentHandle&&(t.handle=this._currentHandle.htmlElement,t.handleIndex=this._currentHandle.handleIndex);var s=this._presenter.getModelAbacusProperty();return t.abacusProperty=e.getCloneAbacusProperty(s),t},e.prototype._eventChangeWrapper=function(e){void 0===e&&(e=this._customEventChange);var t=this._widgetContainer.htmlElement.dispatchEvent(this._customEventChange),s=this._presenter.getModelAbacusProperty();return"function"==typeof(null==s?void 0:s.change)&&s.change(e,this._getEventUIData()),t},e.prototype._eventCreateWrapper=function(e){void 0===e&&(e=this._customEventCreate);var t=this._widgetContainer.htmlElement.dispatchEvent(this._customEventCreate),s=this._presenter.getModelAbacusProperty();return"function"==typeof(null==s?void 0:s.create)&&s.create(e,this._getEventUIData()),t},e.prototype._eventSlideWrapper=function(e){void 0===e&&(e=this._customEventSlide);var t=this._widgetContainer.htmlElement.dispatchEvent(this._customEventSlide),s=this._presenter.getModelAbacusProperty();return"function"==typeof(null==s?void 0:s.slide)&&s.slide(e,this._getEventUIData()),t},e.prototype._eventStartWrapper=function(e){void 0===e&&(e=this._customEventStart);var t=this._widgetContainer.htmlElement.dispatchEvent(this._customEventStart),s=this._presenter.getModelAbacusProperty();return"function"==typeof(null==s?void 0:s.start)&&s.start(e,this._getEventUIData()),t},e.prototype._eventStopWrapper=function(e){void 0===e&&(e=this._customEventStop);var t=this._widgetContainer.htmlElement.dispatchEvent(this._customEventStop),s=this._presenter.getModelAbacusProperty();return"function"==typeof(null==s?void 0:s.stop)&&s.stop(e,this._getEventUIData()),t},e.prototype._mouseHandler=function(e){var t,s,i=this,n=i._presenter.getModelAbacusProperty();if((null===(t=n.values)||void 0===t?void 0:t.length)&&i._currentHandle){var l=0;e instanceof MouseEvent?l=this._isVertical?e.clientY:e.clientX:e instanceof TouchEvent&&(l=this._isVertical?e.changedTouches[0].screenY:e.changedTouches[0].screenX);var r=this.getPosPercent(l),o=this.getValFromPosPercent(r),c=null===(s=n.values)||void 0===s?void 0:s.slice(0),h=a(i._handles,2),u=h[0],d=h[1],m=a(n.values,2),_=m[0],p=m[1];0===i._currentHandle.handleIndex&&(o>=p?(c[0]=p,i._currentHandle=d):c[0]=o),1===i._currentHandle.handleIndex&&(o<=_?(c[1]=_,i._currentHandle=u):c[1]=o),i._presenter.setAbacusValue(c)}},e.prototype._calcHandleValues=function(e){var t,s,a;if(!Number.isNaN(e)){var i=this._presenter.getModelAbacusProperty();if(null===(t=i.values)||void 0===t?void 0:t.length){var n=[];if(i.values&&(n=null===(s=i.values)||void 0===s?void 0:s.slice(0)),!0===i.range&&(null===(a=i.values)||void 0===a?void 0:a.length)&&i.step){var l=i.values[0]-e;l=l<0?l*=-1:l;var r=i.values[1]-e;(r=r<0?r*=-1:r)<l?n[1]=e:n[0]=e}else n[0]=e;this._presenter.setAbacusValue(n)}}},e.prototype._bindEventListeners=function(){var e=this;e._presenter.eventTarget.addEventListener("update-model",this._updateModelHandler.bind(this)),e._widgetContainer.htmlElement.addEventListener("click",e._handlerWidgetContainerClick.bind(e)),e._widgetContainer.htmlElement.addEventListener("touchend",e._handlerWidgetContainerClick.bind(e)),document.addEventListener("mousemove",e._handlerHandleItemClickMove.bind(e),{passive:!0}),document.addEventListener("touchmove",e._handlerHandleItemClickMove.bind(e),{passive:!0}),document.addEventListener("mouseup",e._handlerHandleItemClickStop.bind(e)),document.addEventListener("touchend",e._handlerHandleItemClickStop.bind(e)),document.addEventListener("touchcancel",e._handlerHandleItemClickStop.bind(e))},e.prototype._updateModelHandler=function(){this.updateView()},e.prototype._handlerWidgetContainerClick=function(e){var t,s,a,i;e.preventDefault();var n=this,l=n._presenter.getModelAbacusProperty(),r=e.target,o=(null===(t=l.classes)||void 0===t?void 0:t.handle)?null===(s=l.classes)||void 0===s?void 0:s.handle:"",c=(null===(a=l.classes)||void 0===a?void 0:a.mark)?null===(i=l.classes)||void 0===i?void 0:i.mark:"";if(!(n._isDisabled||r.classList.contains(o)||r.classList.contains(c))){var h=0;e instanceof MouseEvent?h=this._isVertical?e.clientY:e.clientX:e instanceof TouchEvent&&(h=this._isVertical?e.changedTouches[0].screenY:e.changedTouches[0].screenX);var u=this.getPosPercent(h),d=this.getValFromPosPercent(u);n._calcHandleValues(d)}},e.prototype._handlerHandleItemClickStart=function(e){e.preventDefault();var t=this;t._isDisabled||(t._isDragHandle=!0,t._eventStartWrapper(e))},e.prototype._handlerHandleItemClickMove=function(e){var t=this;t._isDisabled||(null!==t._handleMovingTimer&&clearTimeout(t._handleMovingTimer),t._handleMovingTimer=setTimeout((function(){t._isDragHandle&&t._mouseHandler(e)}),5))},e.prototype._handlerHandleItemClickStop=function(e){var t=this;t._isDragHandle&&t._eventStopWrapper(e),t._isDragHandle=!1},e.prototype._createScale=function(){var t=this;this._mapScale.size&&this._removeScale();var s=this._presenter.getModelAbacusProperty();if(void 0!==s.min&&void 0!==s.max&&void 0!==s.step){for(var a=s.min;a<=s.max;a+=s.step){a=e.round(a,s.step);var i=new h.default(s.classes),n=this.getPosFromValue(a);this._isVertical?i.posBottom=n:i.posLeft=n,i.htmlElement.innerText=a.toString(),this._mapScale.set(a,i)}a!==s.max&&(i=new h.default(s.classes),n=this.getPosFromValue(s.max),this._isVertical?i.posBottom=n:i.posLeft=n,i.htmlElement.innerText=s.max.toString(),this._mapScale.set(a,i))}this._mapScale.forEach((function(e){var s=e;t._widgetContainer.htmlElement.contains(t._handles[0].htmlElement)?t._handles[0].htmlElement.before(s.htmlElement):t._widgetContainer.htmlElement.append(s.htmlElement)})),this._thinOutScale(),this._bindEventListenersOnMarks()},e.prototype._removeScale=function(){this._mapScale.forEach((function(e){e.htmlElement.remove()})),this._mapScale.clear()},e.prototype._thinOutScale=function(){var e,t,s,a,n=this;a=this._isVertical?this._widgetContainer.htmlElement.offsetHeight:this._widgetContainer.htmlElement.offsetWidth;var l=0;if(this._mapScale.forEach((function(e){var t=e;n._isVertical?l+=t.htmlElement.offsetHeight+7:l+=t.htmlElement.offsetWidth+7})),a<l){var r=this._presenter.getModelAbacusProperty();if(void 0!==r.min&&void 0!==r.max&&void 0!==r.step){var o=!1;try{for(var c=i(this._mapScale),h=c.next();!h.done;h=c.next()){var u=h.value;u[0]===r.min||u[0]===r.max||o?o=!1:(null===(s=u[1])||void 0===s||s.htmlElement.remove(),this._mapScale.delete(u[0]),o=!0)}}catch(t){e={error:t}}finally{try{h&&!h.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}}}l=0,this._mapScale.forEach((function(e){var t=e;n._isVertical?l+=t.htmlElement.offsetHeight+7:l+=t.htmlElement.offsetWidth+7})),a<l&&this._thinOutScale()},e.prototype._highlightMarks=function(){var e,t,s;if(this._mapScale.size){var a=this._presenter.getModelAbacusProperty(),n=a.range;if(void 0!==a.min&&void 0!==a.max&&void 0!==a.step&&(null===(s=a.values)||void 0===s?void 0:s.length))try{for(var l=i(this._mapScale),r=l.next();!r.done;r=l.next()){var o=r.value,c=o[0]>=a.values[0]&&o[0]<=a.values[1];"min"===n&&o[0]<=a.values[0]||"max"===n&&o[0]>=a.values[0]||!0===n&&c?o[1].isInrange(!0):o[1].isInrange(!1),o[0]===a.values[0]||o[0]===a.values[1]?o[1].isSelected(!0):o[1].isSelected(!1)}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}}},e.prototype._bindEventListenersOnMarks=function(){var e,t,s=this,a=function(e){e[1].htmlElement.addEventListener("click",(function(){var t,a=s;if(!a._isDisabled){var i=e[0];(null===(t=a._cachedAbacusProperty)||void 0===t?void 0:t.value)!==i&&a._calcHandleValues(i)}})),e[1].htmlElement.addEventListener("touchend",(function(){var t,a=s;if(!a._isDisabled){var i=e[0];(null===(t=a._cachedAbacusProperty)||void 0===t?void 0:t.value)!==i&&a._calcHandleValues(i)}}))};try{for(var n=i(this._mapScale),l=n.next();!l.done;l=n.next())a(l.value)}catch(t){e={error:t}}finally{try{l&&!l.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},e.prototype._setTransition=function(){var e="",t=this._presenter.getModelAbacusProperty().animate;"number"==typeof t&&t>0?e=t.toString():!0===t?e="400":"slow"===t?e="600":"fast"===t&&(e="200"),e=e?e+"ms":"";for(var s=0;s<this._handles.length;s+=1)this._handles[s].htmlElement.style.transition=e,this._tooltips[s]&&(this._tooltips[s].htmlElement.style.transition=e);this._range.htmlElement.style.transition=e,this._mapScale.forEach((function(t){t.htmlElement.style.transition=e}))},e.getCloneAbacusProperty=function(e){var t,s={};return Object.assign(s,e),s.values=null===(t=e.values)||void 0===t?void 0:t.slice(0),Object.assign(s.classes,e.classes),s},e.prototype._findMovedHandle=function(){var e,t,s=this._presenter.getModelAbacusProperty(),i=a(this._handles,2),n=i[0],l=i[1];return this._currentHandle=n,(null===(e=this._cachedAbacusProperty.values)||void 0===e?void 0:e.length)&&(null===(t=s.values)||void 0===t?void 0:t.length)&&this._cachedAbacusProperty.values[1]!==s.values[1]&&(this._currentHandle=l),this._currentHandle},e.countNumAfterPoint=function(e){var t=e.toString();return(""+t).indexOf(".")>=0?(""+t).split(".")[1].length:0},e.round=function(t,s){var a=e.countNumAfterPoint(s);return a>0?parseFloat(t.toFixed(a)):Math.round(t)},e.arrayCompare=function(e,t){if(!e||!t)return!1;if((null==e?void 0:e.length)!==(null==t?void 0:t.length))return!1;for(var s=0;s<e.length;s+=1)if(e[s]!==t[s])return!1;return!0},e}();t.default=d},5064:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){this._width=100,this._htmlElement=e,this._className=(null==t?void 0:t.abacus)?t.abacus:"abacus",this._classNameDisabled=(null==t?void 0:t.disabled)?t.disabled:"abacus_disabled",this._classNameVertical=(null==t?void 0:t.vertical)?t.vertical:"abacus_vertical",this._htmlElement.classList.add(this._className),this._htmlElement.classList.add("js-"+this._className)}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"htmlElement",{get:function(){return this._htmlElement},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},set:function(e){this._htmlElement.classList.remove(this._className),this._htmlElement.classList.add(e),this._className=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"classNameDisabled",{get:function(){return this._classNameDisabled},set:function(e){e&&"string"==typeof e&&(this._htmlElement.classList.contains(this._classNameDisabled)&&this._htmlElement.classList.add(e),this._classNameDisabled&&this._htmlElement.classList.remove(this._classNameDisabled),this._classNameDisabled=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"classNameVertical",{get:function(){return this._classNameVertical},set:function(e){e&&"string"==typeof e&&(this._htmlElement.classList.contains(this._classNameVertical)&&this._htmlElement.classList.add(e),this._classNameVertical&&this._htmlElement.classList.remove(this._classNameVertical),this._classNameVertical=e)},enumerable:!1,configurable:!0}),e.prototype.isDisabled=function(e){void 0!==e&&this._classNameDisabled&&(e?this._htmlElement.classList.add(this._classNameDisabled):this._htmlElement.classList.remove(this._classNameDisabled))},e.prototype.isVertical=function(e){void 0!==e&&this._classNameVertical&&(e?this._htmlElement.classList.add(this._classNameVertical):this._htmlElement.classList.remove(this._classNameVertical))},e}();t.default=s},8882:function(e,t,s){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(s(3609)),n=a(s(6958));i.default.fn.abacus=function(e,t,s){var a=this;return this.each((function(){var i,l=this;if(l.jqueryAbacusInstance instanceof n.default?i=l.jqueryAbacusInstance:(i="object"==typeof e?new n.default(l,e):new n.default(l),l.jqueryAbacusInstance=i),"string"==typeof e){var r=void 0;switch(e){case"destroy":break;case"disable":i.option("disabled",!0);break;case"enable":i.option("disabled",!1);break;case"instance":a=i;break;case"option":void 0!==typeof(r="object"==typeof t?i.option(void 0,t):"string"==typeof t?i.option(t,s):i.option())&&(a=r);break;case"value":void 0!==typeof(r=i.option("value",s))&&(a=r)}}})),a}},3609:e=>{"use strict";e.exports=jQuery}},t={};function s(a){if(t[a])return t[a].exports;var i=t[a]={exports:{}};return e[a].call(i.exports,i,i.exports,s),i.exports}s(8882),s(5160)})();
//# sourceMappingURL=abacus.js.map?v=9a687286fafc48058efe